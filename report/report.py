from typing import TypedDict
from dataclasses import dataclass

from db.bigquery import get_accounts
from report.metrics.base import IMetric
from report.metrics import daily, weekly


@dataclass
class MCC:
    name: str
    dataset: str
    table_suffix: str
    receivers: list[str]
    accounts: list[dict[str, str]]


class IReport(TypedDict):
    mode: str
    metrics: list[IMetric]


report_daily: IReport = {
    "mode": "Daily",
    "metrics": [
        daily.underspent_accounts,
        daily.underspent_budgets,
        daily.clicks,
        daily.impressions,
        daily.conversions,
        daily.ctr,
        daily.potential_negative_search_terms,
    ],
}

report_weekly: IReport = {
    "mode": "Weekly",
    "metrics": [
        weekly.underspent_accounts,
        weekly.underspent_budgets,
        weekly.clicks,
        weekly.impressions,
        weekly.conversions,
        weekly.ctr,
        weekly.cpc,
        weekly.sis,
        weekly.topsis,
        weekly.potential_negative_search_terms,
        weekly.campaign_performance,
        weekly.ad_group_performance,
        weekly.ad_group_cpa,
        weekly.keyword_cpa,
    ],
}

luux_media_accounts = get_accounts("GoogleAds", "3413321199")
luux_media_excluded = [
    "4068193193",
    "2699221811",
    "7235067194",
    "6177687558",
    "4664538796",
]
multi_layer_accounts = get_accounts("GoogleAdsMultiLayer", "8228156051")
multi_layer_excluded = [
    "3577304756",
    "2942409509",
    "2445852490",
    "2343388639",
    "2952902054",
    "2328042848",
    "6609415344",
    "3026351895",
    "4902073755",
    "5185508970",
    "9961356209",
    "2538560140",
    "2384155923",
    "3291819755",
    "8599252393",
    "3491944868",
    "7831127899",
    "8870207842",
    "1048140610",
    "9121671488",
    "2886758791",
    "1251291788",
    "7560699221",
    "9240277591",
    "3949432991",
    "8586086912",
    "2273343025",
    "4442988593",
    "1527452484",
    "9551715521",
    "4775067346",
    "1256753213",
    "5624607225",
    "9965147366",
    "2121397813",
    "7235067194",
    "1449810564",
    "3184184570",
    "8231639693",
    "4749202596",
    "3413321199",
    "3793441542",
    "9381219956",
    "3488166290",
    "6578837082",
    "9799942098",
    "5917940803",
    "7377785643",
    "2734914242",
    "7356188592",
    "8885345290",
    "5794940174",
    "2367531421",
    "3196015555",
    "5222827628",
    "7927385111",
    "7592875743",
    "2770662735",
    "1462556688",
    "8462574968",
    "4618844372",
    "6051650494",
    "9500856754",
    "5143313686",
    "2563929886",
    "2699221811",
    "8220022786",
    "9722325934",
    "2135829243",
    "3367635342",
    "5177227519",
    "8216410101",
    "9041354211",
    "4487219846",
    "9071252486",
    "9127600100",
    "7171419613",
    "3605171562",
    "4515183298",
    "4343930145",
    "1255318652",
    "5857660895",
    "5452533243",
    "6763824549",
    "2383580011",
    "3467074684",
    "6846786049",
    "4814868274",
    "5779172515",
    "4873378784",
    "1502986311",
    "7446142684",
    "1878889852",
    "3075367600",
    "8609357113",
    "1234237406",
    "2143489673",
    "3177296098",
    "3772373673",
    "9949932149",
    "6819785501",
    "4675847490",
    "7653318342",
    "1346960819",
    "7437369085",
    "4664538796",
    "5821636431",
    "9043073460",
    "3221164309",
    "5682162595",
    "1038852592",
    "9993052247",
    "2784342290",
    "8973235786",
    "4235231260",
    "8700549627",
    "7903668907",
    "7397703964",
    "2768614317",
    "1256302990",
    "9082277975",
    "7785596346",
    "6892799992",
    "1321081709",
    "9032033393",
    "5282549256",
    "8754154431",
    "8706372911",
    "8210741574",
    "5215503821",
    "3314472837",
    "6031076021",
    "5971910097",
    "3514630137",
    "6673990648",
    "5506196060",
    "3101038635",
    "1897347778",
    "9334936763",
    "6762984735",
    "5848290378",
    "7940961554",
    "2418198659",
    "2724886160",
    "1822510041",
    "9470559358",
    "4050936054",
    "4203095592",
    "3842200031",
    "3295372311",
    "6223127833",
    "5480480664",
    "5108408919",
    "4725102274",
    "9411768007",
    "8911803639",
    "1298673384",
    "6574987049",
    "8056424095",
    "5885366148",
    "3968702649",
    "6449619391",
    "4793568180",
    "4633380805",
    "6779751905",
    "2597705531",
    "7846663903",
    "7115407694",
    "6332859374",
    "7408115066",
    "9701551488",
    "6644688078",
    "7191685610",
    "3686233295",
    "7474782311",
    "9469232629",
    "3707417340",
    "9175594400",
    "1976684882",
    "3127055603",
    "6260756325",
    "9125388223",
    "6108649890",
    "2447307917",
    "5409520882",
    "3206998647",
    "5028067019",
    "3215421943",
    "7938191582",
    "4949977980",
    "2151118364",
    "1673170121",
    "6349198280",
    "5250525850",
    "4204920692",
    "6212268679",
    "1461954282",
    "7568244878",
    "9388564374",
    "1170920590",
    "6576637399",
    "9592699392",
    "5067364521",
    "9204833564",
    "2331577817",
    "5273774982",
    "5069969966",
    "6222774141",
    "4442414382",
    "4990661545",
    "9463776747",
    "9271076945",
    "5035219293",
    "7662504744",
    "8575940948",
    "7615378693",
    "6036556276",
    "7657978711",
    "3640219372",
    "7307652368",
    "5232750547",
    "1958987993",
    "4182148262",
    "4129995646",
    "3032577364",
    "9224339547",
    "9533815407",
    "8357716766",
    "2493672758",
    "3808677467",
    "8411226382",
    "1405622231",
    "6306322156",
    "4480586649",
    "6132469246",
    "6434726812",
    "8427987774",
    "4068193193",
    "4695413980",
    "9601293986",
    "1749787707",
    "2071521643",
    "6557959664",
    "3882662849",
    "1436785370",
    "6784399282",
    "3470461297",
    "8384432801",
    "4465936956",
    "7879728527",
    "6778052674",
    "1979375952",
    "5446414658",
    "7122387782",
    "9387065016",
    "1122120384",
    "3403413003",
    "6813796162",
    "2056559600",
    "1988611105",
    "4550755420",
    "2952365943",
    "3022362766",
    "7852860039",
    "7151212792",
    "4627624264",
    "8673320258",
    "6262349312",
    "4638480909",
    "5690470525",
    "6925393737",
    "2842529354",
    "2880991937",
    "4242830035",
    "7329502015",
    "7826688862",
    "3230278858",
    "1352384474",
    "4132069645",
    "5256102746",
    "8095293193",
    "5280012970",
]


luux_media = MCC(
    name="LuuxMedia",
    dataset="GoogleAds",
    table_suffix="3413321199",
    receivers=[
        # "hieumdd@gmail.com",
        "analytics@luux-media.com",
    ],
    accounts=[
        i
        for i in luux_media_accounts
        if i["external_customer_id"] not in luux_media_excluded
    ],
)

multi_layer = MCC(
    name="MultiLayer",
    dataset="GoogleAdsMultiLayer",
    table_suffix="8228156051",
    receivers=[
        # "hieumdd@gmail.com",
        "analytics@multi-layer-media.co.uk",
    ],
    accounts=[
        i
        for i in multi_layer_accounts
        if i["external_customer_id"] not in multi_layer_excluded
    ],
)

mccs = [
    luux_media,
    multi_layer,
]
